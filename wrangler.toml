# Name of your Cloudflare Pages project
name = "social-media-preview-generator"

# Main directory that Cloudflare Pages will deploy
assets = "./public"

# Build command for your project
build.command = "npm install"

# Build output directory
build.output_directory = "public"

# Tell Cloudflare Pages this is a Functions project
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Define environment variables for your Functions
# DO NOT put actual values here, set them in the Cloudflare dashboard
[vars]
# CLOUDFLARE_API_TOKEN = ""
# CLOUDFLARE_ACCOUNT_ID = ""
# GROQ_API_KEY = ""

# Configure Cloudflare Pages route handling
[[routes]]
pattern = "/renderSite"
script = "renderSite"

[[routes]]
pattern = "/fetchMetadata"
script = "fetchMetadata"

[[routes]]
pattern = "/generateSEO"
script = "generateSEO"

[[routes]]
pattern = "/storeScreenshot"
script = "storeScreenshot"

[[routes]]
pattern = "/getScreenshot/*"
script = "getScreenshot"

# Configure caching for our application
[cache]
# Cache content for 24 hours by default
default_cache_duration = "24h"

# Enable Workers functionality
[workers]
max_upload_size = "10MB"
max_simultaneous_requests = 5
